{% extends "base.html" %}
{% block content %}
<div class="card shadow-sm">
  <div class="card-header bg-dark text-white">
    Admin Dashboard
  </div>
  <div class="card-body">
    <h5>Welcome, {{ current_user.name }} (Admin)</h5>
    <hr>

    <h4>All Stocks</h4>
    <form method="POST" action="{{ url_for('update_stocks') }}">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Symbol</th>
            <th>Price</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for stock in stocks %}
          <tr>
            <td>{{ stock.id }}</td>
            <td>
              <input type="text" name="symbol_{{ stock.id }}" value="{{ stock.symbol }}" class="form-control" required>
            </td>
            <td>
              <input type="number" step="0.01" name="price_{{ stock.id }}" value="{{ stock.price }}" class="form-control" required>
            </td>
            <td>
              <!-- Delete button -->
              <form action="{{ url_for('delete_stock', stock_id=stock.id) }}" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-danger btn-sm"
                  onclick="return confirm('Are you sure you want to delete this stock?');">Delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <button type="submit" class="btn btn-success">Save Changes</button>
    </form>

    <a href="{{ url_for('create_stock') }}" class="btn btn-primary mt-3">+ Create Stock</a>
  </div>
</div>
{% endblock %}
